\documentclass[final]{article}
\usepackage[T2A]{fontenc} % Поддержка кириллицы
\usepackage[utf8]{inputenc} % Кодировка UTF-8
\usepackage{amsmath} % Математические символы
\usepackage{amssymb} % Дополнительные математические символы
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{ulem}
\usepackage{float}
\usepackage{lastpage}

\hypersetup{
    colorlinks=true,          % Включает цвета ссылок
    linkcolor=black,          % Цвет ссылок (синие)
    urlcolor=black,           % Цвет URL (синие)
}


\begin{document}

    \title{Архитектура как код на основе модели сущностей Catlair}
    \author{
        Черкас Руслан
        Челединов Игорь
    }
    \date{2025-04-19}

    \begin{small}
        \begingroup
        \renewcommand{\baselinestretch}{0.8}

        \renewcommand{\contentsname}{Содержание}
        \maketitle
        \tableofcontents

        \section*{Примечания}
            \begin{enumerate}
                \item doi:10.5281/zenodo.14319493
                \url{https://doi.org/***}

                \item Постоянный адрес документа [ru]: 
                \url{https://github.com/johnthesmith/catlair-archcode/blob/main/export/catlair-archcode-ru.pdf}

                \item Постоянный адрес документа [en]: 
                \url{https://github.com/johnthesmith/catlair-archcode/blob/main/export/catlair-archcode-en.pdf}

                \item Статья опубликована под лицензией: 
                \url{https://creativecommons.org/licenses/by-sa/4.0/} CC BY-SA 4.0
            \end{enumerate}
        \endgroup
    \end{small}

    \section{Введение}

        Статья предлагает концепцию описания архитектуры информационных систем в 
        рамках минимального набора правил.

        Концепция основана на использовании иерархии сущностей. Описание 
        универсально и минималистично. Влючает: индекс сущностей, 
        контекстно-зависимые свойства и связи.

    \section{Определения} 

        Концепция оперирует следующими специфическими понятиями:

        \begin{enumerate}

            \item Сущность — именованная абстракция, отображающая объект, 
            понятие, роль или любое другое явление реального мира в 
            информационной системе. Сущности образуют иерархии, могут иметь 
            свойства и связываться друг с другом.

            Далее по тексту сущность обозначается как \texttt{entity}, а 
            множество сущностей — как \texttt{entities}.

            \item Свойство сущности — описание сущности, определяещее его 
            особенности, характеристики. Примером свойства сущности в 
            архитектуре можно назвать наименование, описание, количественные 
            показатели объема и тд.

            Далее по тексту свойства обозначается как \texttt{prop}, а множество 
            атрибутов — как \texttt{props}.

            \item Связи сущностей — средство определения зависимости или
            взаимодействия между сущностями. 

            Далее по тексту связи как \texttt{link}, а множество 
            связей — как \texttt{links}.

            \item Контексты — специфические для различных участников и ситуаций 
            взгляды на свойства и связи сущностей, в зависимости от окружения. 
            Примером контекста может выступать язык описания, различия в 
            восприятии сущности со стороны бизнес логики и разработчика, уровень 
            детализации схем.

            Далее по тексту контекст обозначается как \texttt{context}, а их 
            множество как \texttt{contexts}.

        \end{enumerate}

    \section{Теория}

        В основе концепции лежат следующие принципы:

        \begin{enumerate}
            \item Любое понятие в информационной системе следует описывать как 
            сущность.

            \item Для каждой сущности неоходимо минимально определить:
            \begin{itemize}
                \item факт существования;
                \item тип сущности.
            \end{itemize}

            \item Все иные описания и свойства сущности следует признать 
            вторичными и зависящими от различных контекстов, а именно:
            \begin{itemize}
                \item связь сущностей между собой;
                \item атрибуты или свойства сущности.
            \end{itemize}

            \item Концепция придерживается 
            \href{https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8}{принципа 
            разделения ответсвенности}, а потому отделяет описание сущностей и их 
            связей от реализации действий с ними и интерпритации в тех или иных 
            целях.

        \end{enumerate}


    \section{Практика}

        Для практических примеров применяется синтаксис YAML.

        \subsection{Первая сущность}

            \begin{enumerate}

                \item Для сущностей используется отношение кортежей в формате 
                ключ-значение, где ключ — это идентификатор сущности, а значение — 
                идентификатор её типа. 

                Это соответствует реляционному представлению с двумя атрибутами:

                \begin{itemize}
                    \item \texttt{id} - идентификатор сущности;
                    \item \texttt{type} - идентификатор типа сущности (который, в свою 
                    очередь является сущностью).
                \end{itemize}
                
                \item Поскольку тип сущности обязателен, а никакого типа еще не 
                существует, первую сущность следует самотипизировать во 
                множестве entities:

                \begin{verbatim}
                entities:
                    entity: "entity"
                \end{verbatim}


                \textit{Примечание:} Самотипизирующися кортеж создает новый домен. 
                Их количество не огранично, и каждый может развиваться независимо.

            \end{enumerate}

    \subsection{Развитие модели}

        \begin{enumerate}
            \item Определим несколько сущностей, которые в дальнейшем будут
            использоваться при описании архитектуры.

            \begin{verbatim}
            entities:

                # Базовые сущности архитектуры 

                # Компонент (сервисы, хранилища состояний и тд...)
                component: "entity"
                # Сервис как компонент
                service: "component"
                # База данных как компонент
                db: "component"
                # Агент обладающий возможностью действовать
                agent: "entity"
                # Определили пользователя, как агента
                user: "agent"
                # Определили клиента, как пользователя
                client: "user"

                # Добавим несколько специфичных для архитектуры сущностей:

                # Определим сервис backend
                my-backend: "service"
                # Определим базу данных 
                my-db: "db"
                # Определим внутреннего пользователя Алиса
                alice: "user"
                # Определим клиента Боб
                bob: "client"

            \end{verbatim}

            \item Таким образом последоватльными декларациями описаны 
            разнородные сущности, которые далее будут использованы.

        \end{enumerate}


    \subsection{Контексты}

        \begin{enumerate} 

            \item Описание сущности различается для участников с 
            учетом окружения. Такие различия определяются контекстом.

            \item Простейшим примером является описание сущности в 
            человекочитаемом виде на различных языках.

            \item Контекстом может быть не только язык, но любой специфический 
            взгляд на сущности со стороны различных групп, отделов, 
            подразделений, задач.

            \item Добавим несколько контекстов.

            \begin{verbatim}
            entities:

                # Контекст как сущность
                context: "entity"
                # Язык является конекстом
                lang: "contect"

                # Русский язык
                ru: "lang"
                # Английский язык
                en: "lang"

            \end{verbatim}

        \end{enumerate}

    \subsection{Связи}
        \begin{enumerate}

            \item После добавления сущностей следует учитывать из связи 
            между. Для этого применяется секция links.

            \item Связи описываются как типизированное направления от одной сущности 
            к другой, при этом тип так же является сущностью. 

            \item Так же для связей возможно указание множества контекстов, 
            которые позволяют отобразить связи для различных ситуаций. Контекст 
            является опциональным. В случае, если он не указан, возможно 
            допущение применимости связи для любого контекста.

            \item В общем виде связи могут быть представлены кортежем атрибутов:
            \begin{itemize}
                \item \texttt{from} - сущность источник связи;
                \item \texttt{to} - сущность направление связи;
                \item \texttt{type} - сущность тип связи;
                \item \texttt{context} - опциональный список контекстов, для которых связь актуальна;
                \item \texttt{attr} - опциональный список спекцифичные атрибутов 
                связи в формате ключ значение;
            \end{itemize}

            \item И так опишем некоторые связи сущностей:

            \begin{verbatim}

            entities:
                # Множество связей как сущность
                link: "entity"

            # Определяем связи между сущностями в секции links
            links:         
                - 
                    # Определяем что mouse обладает правом select для БД
                    from: "mouse" 
                    to: "service"
                    link: "select"
                    context: 
                        - "right"
                -              
                    # Кот может добавлять в базу данных
                    from: "cat"
                    link: "select"
                    to: "my-db"
                    context: 
                        - "right"
                -              
                    from: "cat"
                    link: "insert"
                    to: "my-db"
                    context: 
                        - "right"
                -
                    # Определяем что сервис подключается а БД
                    from: "my-backend"
                    to: "my-db"
                    link: "connect"
                -
                    # Определяем что клиент подключается к сервису
                    from: "client"
                    to: "service"
                    link: "connect"

            \end{verbatim}

            \item Указанный способ описания может включать множество различных 
            зависимостей включая техническую связь компонентов, иерархические 
            структуры подчиненности, локацию размещений компонентов и прочее.
 
        \end{enumerate}



    \subsection{Описание сущностей}
        \begin{enumerate}

            \item Далее для сущностей возможнос описание специфичных свойств
            так же в разрезе контекстов.


        \end{enumerate}
        


    \section{Применимость}
        

    \section{Резюме}

    \renewcommand{\refname}{Список литературы}
    \begin{thebibliography}{9}

        \bibitem{EWD447} EWD447
        \textit{On the role of scientific thought}
        \url{https://www.cs.utexas.edu/~EWD/transcriptions/EWD04xx/EWD447.html}

        \bibitem{SimonBrown}
        Simon Brown.\\
        \textit{Software Architecture as Code}.\\
        \url{https://static.codingthearchitecture.com/presentations/saturn2015-software-architecture-as-code.pdf}

        \bibitem{github}
        Cherkas R. Cheledinov I.\\
        \textit{Архитектура сущностей Catlair}.\\
        \url{https://github.com/johnthesmith/scraps/blob/main/ru/entities.md}

        \bibitem{RichardsFord}
        Mark Richards, Neal Ford.\\
        \textit{Is "Architecture as Code" the Future of Software Design?}\\
        \url{https://www.architectureandgovernance.com/applications-technology/is-architecture-as-code-the-future-of-software-design/}

    \end{thebibliography}

\end{document}


